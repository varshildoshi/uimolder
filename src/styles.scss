/* 1. Module Imports (Must be at the very top) */
@use '@angular/material' as mat;
@use "tailwind.css";

/* 2. Define the UiMolder Brand Palettes */
$brand-gold-palette: (
  0: #000000,
  10: #261900,
  20: #402d00,
  30: #5c4300,
  40: #7a5900,
  50: #997000,
  60: #bc8a00,
  70: #e0a400,
  80: #fbbf24,
  // Main Gold
  90: #ffde9f,
  95: #ffefd7,
  98: #fff8f1,
  99: #fffbff,
  100: #ffffff,
);

/* 3. Apply the Theme */
html {
  color-scheme: dark;
  @include mat.theme((color: (theme-type: dark,
        primary: $brand-gold-palette,
        tertiary: $brand-gold-palette,
      ),
      typography: (brand-family: 'Tomorrow, sans-serif',
        plain-family: 'Tomorrow, sans-serif',
        bold-weight: 700,
        medium-weight: 500,
        regular-weight: 400,
      ),
      density: 0,
    ));
}

/* Material Select & Overlay Overrides */
.mat-mdc-select-panel {
  background-color: #1e293b !important;
  /* Slate 800 */
  border: 1px solid #334155 !important;
  /* Slate 700 */
}

.mat-mdc-option {
  color: #f1f5f9 !important;

  &:hover:not(.mdc-list-item--disabled) {
    background-color: rgba(251, 191, 36, 0.1) !important;
  }

  &.mdc-list-item--selected:not(.mdc-list-item--disabled) {
    background-color: rgba(251, 191, 36, 0.2) !important;

    .mdc-list-item__primary-text {
      color: #fbbf24 !important;
    }
  }
}

/* Textarea & Radio Overrides */
.mat-mdc-form-field {
  .mat-mdc-text-field-wrapper {
    background-color: var(--uim-bg-input) !important;
  }

  .mat-mdc-form-field-focus-overlay {
    background-color: transparent !important;
  }

  textarea.mat-mdc-input-element {
    resize: vertical;
    min-height: 80px;
    color: var(--uim-text-color) !important;
  }

  input.mat-mdc-input-element {
    color: var(--uim-text-color) !important;
  }
}

.mat-mdc-radio-button {
  &.mat-accent {
    --mdc-radio-selected-icon-color: var(--uim-accent-color);
    --mdc-radio-selected-focus-icon-color: var(--uim-accent-color);
    --mdc-radio-selected-hover-icon-color: var(--uim-accent-color);
    --mdc-radio-selected-pressed-icon-color: var(--uim-accent-color);
  }

  .mdc-label {
    color: #f1f5f9 !important;
  }
}

/* Datepicker Overrides */
.mat-datepicker-toggle {
  color: var(--uim-label-color) !important;
}

.mat-datepicker-content {
  background-color: #1e293b !important;
  border: 1px solid #334155 !important;

  .mat-calendar-period-button,
  .mat-calendar-body-label,
  .mat-calendar-body-cell-content {
    color: #f1f5f9 !important;
  }

  .mat-calendar-arrow {
    fill: #f1f5f9 !important;
  }

  .mat-calendar-next-button,
  .mat-calendar-previous-button {
    color: #f1f5f9 !important;
    position: relative;
    overflow: hidden;
    width: 40px !important;
    height: 40px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 0 !important;
    /* Hides stray text nodes */

    /* Hide internal labels but keep the ripple */
    .mdc-button__label,
    .mat-mdc-button-touch-target,
    .cdk-visually-hidden {
      display: none !important;
    }

    &::after {
      color: #f1f5f9 !important;
      font-size: 24px !important;
      display: inline-block !important;
      position: static !important;
    }

    &:hover {
      background-color: var(--uim-accent-glow) !important;
      border-radius: 50%;

      &::after {
        color: var(--uim-accent-color) !important;
      }
    }
  }

  .mat-calendar-body-selected {
    background-color: var(--uim-accent-color) !important;
    color: #000 !important;
  }

  .mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical) {
    border-color: var(--uim-accent-color) !important;
  }
}

/* Global Material Tooltip Styling - Higher Specificity */
body .mat-mdc-tooltip {
  --mdc-plain-tooltip-container-color: #1e293b !important;
  --mdc-plain-tooltip-label-text-color: var(--uim-text-color) !important;
  font-family: 'Tomorrow', sans-serif !important;
  border: 1px solid #334155 !important;
  border-radius: 4px !important;
  font-size: 12px !important;

  .mdc-tooltip__surface {
    background-color: #1e293b !important;
    color: var(--uim-text-color) !important;
    opacity: 1 !important;
  }
}


/* Native Select/Option Global Styling */
select option {
  background-color: #0f172a;
  color: #f1f5f9;
}

input[type="date"] {
  color-scheme: dark !important;
  accent-color: #fbbf24 !important;

  &::-webkit-calendar-picker-indicator {
    width: 20px !important;
    height: 20px !important;
    cursor: pointer !important;
  }

  &::-webkit-datetime-edit-month-field:focus,
  &::-webkit-datetime-edit-day-field:focus,
  &::-webkit-datetime-edit-year-field:focus {
    background-color: #fbbf24 !important;
    color: #000 !important;
    border-radius: 2px;
  }
}

/* 4. Global Structural Styles */
:root {
  --uim-label-color: #94a3b8;
  --uim-text-color: #f1f5f9;
  --uim-placeholder-color: #475569;
  --uim-bg-input: rgba(30, 41, 59, 0.5);
  --uim-border-color: #334155;
  --uim-accent-color: #fbbf24;
  --uim-red-accent-color: #ef4444;
  --uim-accent-glow: rgba(251, 191, 36, 0.2);
  --uim-radius: 0.5rem;
  --uim-font: 'Tomorrow', sans-serif;
}

html,
body {
  height: 100%;
  margin: 0;
}

body {
  background: #020617;
  color: #f1f5f9;
  font-family: 'Tomorrow', sans-serif !important;
}

.mat-typography h1,
.mat-typography h2,
.mat-typography h3,
.cdk-overlay-container {
  font-family: 'Tomorrow', sans-serif !important;
}

.cdk-overlay-container {
  color-scheme: dark;
}

.cdk-drop-list-dragging:not(.elements-menu) {
  border: 2px solid color-mix(in oklab, var(--color-white) 20%, transparent) !important;
  background-color: color-mix(in oklab, var(--color-white) 5%, transparent) !important;
}

/* Global Custom Scrollbar Utility */
.custom-scrollbar {
  /* Firefox */
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) transparent;

  /* Chrome, Edge, Safari */
  &::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
  }

  &:hover::-webkit-scrollbar-thumb {
    background: rgba(251, 191, 36, 0.5);
    /* Brand Gold */
  }

  &::-webkit-scrollbar-thumb:hover {
    background: #fbbf24;
    /* Solid Gold on direct hover */
  }
}

@keyframes rejection-blink {

  0%,
  100% {
    border-color: rgba(239, 68, 68, 0.5);
    box-shadow: 0 0 0 rgba(239, 68, 68, 0);
  }

  50% {
    border-color: rgba(239, 68, 68, 1);
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.4);
  }
}

.animate-rejection {
  animation: rejection-blink 0.8s infinite;
  border-style: dashed !important;
  border-width: 2px !important;
}

/* Make all view transitions smoother */
::view-transition-group(root) {
  animation-duration: 0.3s;
  animation-timing-function: cubic-bezier(0.2, 0, 0, 1);
}

/* Ensure individual elements and rows also transition smoothly */
::view-transition-group(*) {
  animation-duration: 0.3s;
  animation-timing-function: cubic-bezier(0.2, 0, 0, 1);
}

/* Prevent cross-fade "ghosting" for morphing elements */
::view-transition-old(.row-transition),
::view-transition-new(.row-transition) {
  mix-blend-mode: normal;
  animation-duration: 0.3s;
}